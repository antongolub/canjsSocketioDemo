define(["can","controls/defaultControl","text!templates/user/userlist.hbs","models/userModel","sortable"],function(e,t,n,i,r){return t.extend({model:i(),init:function(){var t=this,o=".b-table",l=".b-table__td--cross";e.view.mustache("userlistHbs",n),e.view("userlistHbs",t.model,function(e){t.element=t.element.append(e).find("#userlist"),t.table=t.element.find(o),t.table.on("click",l,$.proxy(t.onRemoveClick,t)),r.initTable(t.table.get(0))}),i.bind("created",$.proxy(t.fetch,this)),i.bind("destroyed",$.proxy(t.fetch,this)),i.bind("updated",$.proxy(t.fetch,this)),this.fetch()},onRemoveClick:function(e){return this.remove(e.target)},remove:function(e){var t=this,n=$(e),i=n.attr("data-id");return i?(n.parent().remove(),t.model.destroy(i)):i},fetch:function(){var e=this;return e.model.findAll().then(function(){e.table&&e.table.find("th[data-sorted-direction]").attr("data-sorted","").trigger("click")})}})});