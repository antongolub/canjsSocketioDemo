define(["can","text!templates/conn_indicator.hbs","socket"],function(n,t,o){var e=".b-conn_indicator",c="b-conn_indicator--online";return n.Control.extend({init:function(){var c=this;c.element=c.element.prepend(n.view.mustache(t)()).find(e),o.socket.connected&&c.onconnect(),o.on("connect",$.proxy(c.onconnect,c)),o.on("reconnect",$.proxy(c.onconnect,c)),o.on("reconnect_failed",$.proxy(c.ondisconnect,c)),o.on("connect_failed",$.proxy(c.ondisconnect,c)),o.on("disconnect",$.proxy(c.ondisconnect,c))},switchState:function(n){var t=this;t.element.toggleClass(c,!!n)},ondisconnect:function(){this.switchState()},onconnect:function(){this.switchState(!0)}})});