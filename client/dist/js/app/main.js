define("text",["module"],function(e){var t,n,o,r,i,a=["Msxml2.XMLHTTP","Microsoft.XMLHTTP","Msxml2.XMLHTTP.4.0"],s=/^\s*<\?xml(\s)+version=[\'\"](\d)*.(\d)*[\'\"](\s)*\?>/im,c=/<body[^>]*>\s*([\s\S]+)\s*<\/body>/im,l="undefined"!=typeof location&&location.href,u=l&&location.protocol&&location.protocol.replace(/\:/,""),d=l&&location.hostname,f=l&&(location.port||void 0),p={},m=e.config&&e.config()||{};return t={version:"2.0.10",strip:function(e){if(e){e=e.replace(s,"");var t=e.match(c);t&&(e=t[1])}else e="";return e},jsEscape:function(e){return e.replace(/(['\\])/g,"\\$1").replace(/[\f]/g,"\\f").replace(/[\b]/g,"\\b").replace(/[\n]/g,"\\n").replace(/[\t]/g,"\\t").replace(/[\r]/g,"\\r").replace(/[\u2028]/g,"\\u2028").replace(/[\u2029]/g,"\\u2029")},createXhr:m.createXhr||function(){var e,t,n;if("undefined"!=typeof XMLHttpRequest)return new XMLHttpRequest;if("undefined"!=typeof ActiveXObject)for(t=0;3>t;t+=1){n=a[t];try{e=new ActiveXObject(n)}catch(o){}if(e){a=[n];break}}return e},parseName:function(e){var t,n,o,r=!1,i=e.indexOf("."),a=0===e.indexOf("./")||0===e.indexOf("../");return-1!==i&&(!a||i>1)?(t=e.substring(0,i),n=e.substring(i+1,e.length)):t=e,o=n||t,i=o.indexOf("!"),-1!==i&&(r="strip"===o.substring(i+1),o=o.substring(0,i),n?n=o:t=o),{moduleName:t,ext:n,strip:r}},xdRegExp:/^((\w+)\:)?\/\/([^\/\\]+)/,useXhr:function(e,n,o,r){var i,a,s,c=t.xdRegExp.exec(e);return c?(i=c[2],a=c[3],a=a.split(":"),s=a[1],a=a[0],!(i&&i!==n||a&&a.toLowerCase()!==o.toLowerCase()||(s||a)&&s!==r)):!0},finishLoad:function(e,n,o,r){o=n?t.strip(o):o,m.isBuild&&(p[e]=o),r(o)},load:function(e,n,o,r){if(r.isBuild&&!r.inlineText)return void o();m.isBuild=r.isBuild;var i=t.parseName(e),a=i.moduleName+(i.ext?"."+i.ext:""),s=n.toUrl(a),c=m.useXhr||t.useXhr;return 0===s.indexOf("empty:")?void o():void(!l||c(s,u,d,f)?t.get(s,function(n){t.finishLoad(e,i.strip,n,o)},function(e){o.error&&o.error(e)}):n([a],function(e){t.finishLoad(i.moduleName+"."+i.ext,i.strip,e,o)}))},write:function(e,n,o){if(p.hasOwnProperty(n)){var r=t.jsEscape(p[n]);o.asModule(e+"!"+n,"define(function () { return '"+r+"';});\n")}},writeFile:function(e,n,o,r,i){var a=t.parseName(n),s=a.ext?"."+a.ext:"",c=a.moduleName+s,l=o.toUrl(a.moduleName+s)+".js";t.load(c,o,function(){var n=function(e){return r(l,e)};n.asModule=function(e,t){return r.asModule(e,l,t)},t.write(e,c,n,i)},i)}},"node"===m.env||!m.env&&"undefined"!=typeof process&&process.versions&&process.versions.node&&!process.versions["node-webkit"]?(n=require.nodeRequire("fs"),t.get=function(e,t,o){try{var r=n.readFileSync(e,"utf8");0===r.indexOf("﻿")&&(r=r.substring(1)),t(r)}catch(i){o(i)}}):"xhr"===m.env||!m.env&&t.createXhr()?t.get=function(e,n,o,r){var i,a=t.createXhr();if(a.open("GET",e,!0),r)for(i in r)r.hasOwnProperty(i)&&a.setRequestHeader(i.toLowerCase(),r[i]);m.onXhr&&m.onXhr(a,e),a.onreadystatechange=function(){var t,r;4===a.readyState&&(t=a.status,t>399&&600>t?(r=new Error(e+" HTTP status: "+t),r.xhr=a,o(r)):n(a.responseText),m.onXhrComplete&&m.onXhrComplete(a,e))},a.send(null)}:"rhino"===m.env||!m.env&&"undefined"!=typeof Packages&&"undefined"!=typeof java?t.get=function(e,t){var n,o,r="utf-8",i=new java.io.File(e),a=java.lang.System.getProperty("line.separator"),s=new java.io.BufferedReader(new java.io.InputStreamReader(new java.io.FileInputStream(i),r)),c="";try{for(n=new java.lang.StringBuffer,o=s.readLine(),o&&o.length()&&65279===o.charAt(0)&&(o=o.substring(1)),null!==o&&n.append(o);null!==(o=s.readLine());)n.append(a),n.append(o);c=String(n.toString())}finally{s.close()}t(c)}:("xpconnect"===m.env||!m.env&&"undefined"!=typeof Components&&Components.classes&&Components.interfaces)&&(o=Components.classes,r=Components.interfaces,Components.utils["import"]("resource://gre/modules/FileUtils.jsm"),i="@mozilla.org/windows-registry-key;1"in o,t.get=function(e,t){var n,a,s,c={};i&&(e=e.replace(/\//g,"\\")),s=new FileUtils.File(e);try{n=o["@mozilla.org/network/file-input-stream;1"].createInstance(r.nsIFileInputStream),n.init(s,1,0,!1),a=o["@mozilla.org/intl/converter-input-stream;1"].createInstance(r.nsIConverterInputStream),a.init(n,"utf-8",n.available(),r.nsIConverterInputStream.DEFAULT_REPLACEMENT_CHARACTER),a.readString(n.available(),c),a.close(),n.close(),t(c.value)}catch(l){throw new Error((s&&s.path||"")+": "+l)}}),t}),define("text!templates/layout.hbs",[],function(){return'<div id="layout" class="b-page">\n    <header class="b-page__header">\n        <menu class="b-menu"></menu>\n    </header>\n    <main class="b-page__main"></main>\n    <footer class="b-page__footer">\n        <a href="http://canjs.com/" class="b-link b-link--silver" title="MVC framework similar to Backbone & Knockout">Canjs</a> +\n        <a class="b-link b-link--silver" href="http://socket.io/">socket.io</a> demo\n    </footer>\n</div>'}),define("views/layoutView",["can","text!templates/layout.hbs"],function(e,t){return e.view.mustache(t)}),define("text!templates/menu.hbs",[],function(){return'<li class="b-menu__li"><a class="b-menu__li__a" href="/">root</a></li>\n<li class="b-menu__li"><a class="b-menu__li__a" href="/users">users</a></li>\n'}),define("views/menuView",["can","text!templates/menu.hbs"],function(e,t){return e.view.mustache(t)}),define("controls/menuControl",["can","views/menuView"],function(e,t){var n="b-menu__li__a--active",o="b-menu__li__a--highlighted";return e.Control({init:function(){var n=this;n.element.append(t()),n.items=$("a"),e.route.bind("change",$.proxy(n.onRouteChange,n))},onRouteChange:function(e,t,r,i){var a,s=n;if("route"===t){switch(i){case"users":a="[href^='/users']";break;case"users/:id":a="[href^='/users']",s=o;break;default:a="[href='/']"}this.switchItem(a,s)}return a},switchItem:function(e,t){var r=this,i=r.items.filter(e);i.hasClass(t)||(r.items.removeClass(n+" "+o),i.addClass(t))}})}),define("text!templates/conn_indicator.hbs",[],function(){return'<div class="b-conn_indicator">•</div>'}),define("socket",["socketio"],function(e){var t=document.location;return e.connect(t.protocol+"//"+t.hostname+":8000")}),define("controls/conn_indicatorControl",["can","text!templates/conn_indicator.hbs","socket"],function(e,t,n){var o=".b-conn_indicator",r="b-conn_indicator--online";return e.Control.extend({init:function(){var r=this;r.element=r.element.prepend(e.view.mustache(t)()).find(o),n.socket.connected&&r.onconnect(),n.on("connect",$.proxy(r.onconnect,r)),n.on("reconnect",$.proxy(r.onconnect,r)),n.on("reconnect_failed",$.proxy(r.ondisconnect,r)),n.on("connect_failed",$.proxy(r.ondisconnect,r)),n.on("disconnect",$.proxy(r.ondisconnect,r))},switchState:function(e){var t=this;t.element.toggleClass(r,!!e)},ondisconnect:function(){this.switchState()},onconnect:function(){this.switchState(!0)}})}),define("controls/layoutControl",["can","views/layoutView","controls/menuControl","controls/conn_indicatorControl"],function(e,t,n,o){return e.Control({init:function(){var e=this;e.element=e.element.append(t()).find("#layout"),e.menuControl=new n($("menu")),e.conn_indicatorControl=new o($("header")),e.element.on("submit","form",$.proxy(e.onsubmit,e))},onsubmit:function(e){return e.preventDefault(),e.stopPropagation(),!1}})}),define("controls/defaultControl",["can"],function(e){return e.Control.extend({showError:function(e){var t,n=this;return e=e.toString(),e&&n.model&&n.model.errors&&(t=n.model.errors(e),n.element.find("[data-error="+e+"]").html(t?t[e].toString():"")),t},hide:function(){var e=this;e.element.hide()},show:function(){var e=this;e.element.show()}})}),define("text!templates/root.hbs",[],function(){return'<section id="root" class="b-section">Root view</section>'}),define("controls/rootControl",["can","controls/defaultControl","text!templates/root.hbs"],function(e,t,n){return t.extend({init:function(){var t=this;t.element=t.element.append(e.view.mustache(n)()).find("#root"),t.hide()}})}),define("routes/router",["can","controls/layoutControl","controls/rootControl"],function(e,t,n){return e.Control({init:function(){var o=this;o.controls.layoutControl=new t($("body")),o.$main=$("main"),o.controls.rootControl=new n(o.$main),e.route("/"),e.route("users"),e.route("users/:id"),e.route.ready()},controls:{},activeControl:null,switchControl:function(e,t){e&&e!==this.activeControl&&(this.activeControl&&this.activeControl.hide(),this.activeControl=e,e.show(t))},loadControl:function(e,t,n,o){var r=this.controls[t],i=this;r?$.isFunction(n)&&n(r,o):require([e],function(){require([t],function(e){i.controls[t]=e=new e(i.$main),$.isFunction(n)&&n(e,o)})})},"/ route":function(){var e=this;e.switchControl(e.controls.rootControl)},"users route":function(e){this.loadControl("modules/users","controls/user/userListControl",$.proxy(this.switchControl,this),e)},"users/:id route":function(e){this.loadControl("modules/users","controls/user/userControl",$.proxy(this.switchControl,this),e)}})}),function(){var e,t,n,o,r,i,a;e="table[data-sortable]",o=/^-?[£$¤]?[\d,.]+%?$/,a=/^\s+|\s+$/g,i="ontouchstart"in document.documentElement,n=i?"touchstart":"click",t=function(e,t,n){return null!=e.addEventListener?e.addEventListener(t,n,!1):e.attachEvent("on"+t,n)},r={init:function(t){var n,o,i,a,s;for(null==t&&(t={}),null==t.selector&&(t.selector=e),o=document.querySelectorAll(t.selector),s=[],i=0,a=o.length;a>i;i++)n=o[i],s.push(r.initTable(n));return s},initTable:function(e){var t,n,o,i,a,s;if(1===(null!=(s=e.tHead)?s.rows.length:void 0)&&"true"!==e.getAttribute("data-sortable-initialized")){for(e.setAttribute("data-sortable-initialized","true"),o=e.querySelectorAll("th"),t=i=0,a=o.length;a>i;t=++i)n=o[t],"false"!==n.getAttribute("data-sortable")&&r.setupClickableTH(e,n,t);return e}},setupClickableTH:function(e,o,i){var a;return a="number"===o.getAttribute("data-type")?r.types.numeric:r.getColumnType(e,i),t(o,n,function(){var t,n,s,c,l,u,d,f,p,m,h,v,b,g,w,C;for(l="true"===this.getAttribute("data-sorted"),u=this.getAttribute("data-sorted-direction"),t=l?"ascending"===u?"descending":"ascending":a.defaultSortDirection,f=this.parentNode.querySelectorAll("th"),p=0,v=f.length;v>p;p++)o=f[p],o.setAttribute("data-sorted","false"),o.removeAttribute("data-sorted-direction");for(this.setAttribute("data-sorted","true"),this.setAttribute("data-sorted-direction",t),d=e.tBodies[0],s=[],w=d.rows,m=0,b=w.length;b>m;m++)n=w[m],s.push([r.getNodeValue(n.cells[i]),n]);for(l?s.reverse():s.sort(a.compare),C=[],h=0,g=s.length;g>h;h++)c=s[h],C.push(d.appendChild(c[1]));return C})},getColumnType:function(e,t){var n,i,a,s,c;for(c=e.tBodies[0].rows,a=0,s=c.length;s>a;a++)if(n=c[a],i=r.getNodeValue(n.cells[t]),""!==i){if(i.match(o))return r.types.numeric;if(!isNaN(Date.parse(i)))return r.types.date}return r.types.alpha},getNodeValue:function(e){return e?null!==e.getAttribute("data-value")?e.getAttribute("data-value"):"undefined"!=typeof e.innerText?e.innerText.replace(a,""):e.textContent.replace(a,""):""},types:{numeric:{defaultSortDirection:"descending",compare:function(e,t){var n,o;return n=parseFloat(e[0].replace(/[^0-9.-]/g,""),10),o=parseFloat(t[0].replace(/[^0-9.-]/g,""),10),isNaN(n)&&(n=0),isNaN(o)&&(o=0),o-n}},alpha:{defaultSortDirection:"ascending",compare:function(e,t){return e[0].localeCompare(t[0])}},date:{defaultSortDirection:"ascending",compare:function(e,t){var n,o;return n=Date.parse(e[0]),o=Date.parse(t[0]),isNaN(n)&&(n=0),isNaN(o)&&(o=0),n-o}}}},setTimeout(r.init,0),window.Sortable=r}.call(this),define("sortable",function(e){return function(){var t;return t||e.Sortable}}(this)),define("App",["can","routes/router","sortable"],function(e,t,n){return{init:function(){e.route.ready(!1),this.router=new t(document.body),n.init()}}}),function(){var e=document.querySelector&&window.localStorage&&window.addEventListener;require.config({app_name:"App",baseUrl:"js/",paths:{framework:e?["//cdn.jsdelivr.net/zepto/1.1.3/zepto.min","lib/zepto.min"]:["//cdn.jsdelivr.net/jquery/1.10.2/jquery.min","lib/jquery/jquery-1.10.2.min"],can:e?["lib/can/can.zepto"]:["lib/can/can.jquery"],text:"lib/require/text",socketio:["//cdnjs.cloudflare.com/ajax/libs/socket.io/0.9.16/socket.io.min","lib/socket.io.min"],sortable:"lib/sortable",assets:"app/assets",socket:"app/assets/socketPipe",models:"app/models",views:"app/views",controls:"app/controls",routes:"app/routes",templates:"app/templates",modules:"app/modules",App:"app/app"},shim:{sicketio:{exports:"io"},can:{deps:["framework"],exports:"can"},sortable:{exports:"Sortable"}}}),require(["App"],function(e){e.init()})}(),define("app/main",function(){});