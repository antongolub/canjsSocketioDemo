define(["can","controls/layoutControl","controls/rootControl"],function(o,t,n){return o.Control({init:function(){var r=this;r.controls.layoutControl=new t($("body")),r.$main=$("main"),r.controls.rootControl=new n(r.$main),o.route("/"),o.route("users"),o.route("users/:id"),o.route.ready()},controls:{},activeControl:null,switchControl:function(o,t){o&&o!==this.activeControl&&(this.activeControl&&this.activeControl.hide(),this.activeControl=o,o.show(t))},loadControl:function(o,t,n,r){var s=this.controls[t],i=this;s?$.isFunction(n)&&n(s,r):require([o],function(){require([t],function(o){i.controls[t]=o=new o(i.$main),$.isFunction(n)&&n(o,r)})})},"/ route":function(){var o=this;o.switchControl(o.controls.rootControl)},"users route":function(o){this.loadControl("modules/users","controls/user/userListControl",$.proxy(this.switchControl,this),o)},"users/:id route":function(o){this.loadControl("modules/users","controls/user/userControl",$.proxy(this.switchControl,this),o)}})});